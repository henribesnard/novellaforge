# ===========================================
# NovellaForge - Variables d'environnement
# ===========================================

# -------------------------------------------
# Application
# -------------------------------------------
APP_ENV=development
DEBUG=true
PROJECT_NAME="NovellaForge"
VERSION="2.0.0"

# -------------------------------------------
# Security
# -------------------------------------------
# Generate a strong SECRET_KEY with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# CRITICAL: Change this in production!
SECRET_KEY=

# JWT Configuration
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# -------------------------------------------
# PostgreSQL Database
# -------------------------------------------
# For production, use strong passwords and consider using docker secrets
POSTGRES_USER=novellaforge
POSTGRES_PASSWORD=change_this_password_in_production
POSTGRES_DB=novellaforge_db
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# Alternative for local development without Docker
# DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/novellaforge_db

# -------------------------------------------
# Redis (Cache & Queue)
# -------------------------------------------
REDIS_URL=redis://redis:6379/0

# -------------------------------------------
# Qdrant (Vector Database for RAG)
# -------------------------------------------
QDRANT_URL=http://qdrant:6333
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=novellaforge_documents

# -------------------------------------------
# Neo4j (Knowledge Graph)
# -------------------------------------------
NEO4J_URI=bolt://neo4j:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=change_this_password
NEO4J_DATABASE=neo4j

# -------------------------------------------
# ChromaDB (Style Memory)
# -------------------------------------------
CHROMA_HOST=chroma
CHROMA_PORT=8000
CHROMA_PERSIST_DIR=./chromadb
CHROMA_COLLECTION_PREFIX=novellaforge

# -------------------------------------------
# DeepSeek AI API
# -------------------------------------------
# REQUIRED: Get your key at https://platform.deepseek.com
DEEPSEEK_API_KEY=your-deepseek-api-key
DEEPSEEK_TIMEOUT=300
CHAT_MAX_TOKENS=4096

# -------------------------------------------
# CORS & Security
# -------------------------------------------
CORS_ORIGINS=http://localhost:3020,http://localhost
ALLOWED_HOSTS=localhost,127.0.0.1

# -------------------------------------------
# Celery (Async Tasks)
# -------------------------------------------
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# -------------------------------------------
# Rate Limiting
# -------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100

# -------------------------------------------
# Logging
# -------------------------------------------
LOG_LEVEL=INFO

# ===========================================
# Frontend (.env.local)
# ===========================================
# Note: Backend runs on port 8002 (mapped from internal 8000)
NEXT_PUBLIC_API_URL=http://localhost:8002/api/v1
NEXT_PUBLIC_WS_URL=ws://localhost:8002/ws
